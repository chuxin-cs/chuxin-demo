<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>拖拽事件示例</title>
    <style>
      .draggable {
        width: 100px;
        height: 100px;
        background-color: lightblue;
        position: absolute;
        top: 50px;
        left: 50px;
        cursor: move;
      }
    </style>
  </head>
  <body>
    <div class="draggable" id="draggable">拖拽我</div>

    <script>
      const draggable = document.getElementById("draggable");
      let offsetX, offsetY;

      // 当鼠标按下时触发
      draggable.addEventListener("mousedown", function (e) {
        e.preventDefault();

        // 计算鼠标在元素内的偏移值
        offsetX = e.clientX - draggable.offsetLeft;
        offsetY = e.clientY - draggable.offsetTop;

        // 监听鼠标移动事件
        document.addEventListener("mousemove", dragElement);

        // 监听鼠标松开事件
        document.addEventListener("mouseup", stopDragging);
      });

      // 鼠标移动时触发的函数
      function dragElement(e) {
        // 计算元素应该移动到的位置
        const x = e.clientX - offsetX;
        const y = e.clientY - offsetY;

        // 移动元素到新位置
        draggable.style.left = x + "px";
        draggable.style.top = y + "px";
      }

      // 鼠标松开时触发的函数
      function stopDragging() {
        // 移除鼠标移动事件监听
        document.removeEventListener("mousemove", dragElement);
        // 移除鼠标松开事件监听
        document.removeEventListener("mouseup", stopDragging);
      }
    </script>
  </body>
</html>
